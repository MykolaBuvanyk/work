import React, { useState, useEffect } from "react";
import { useCanvasContext } from "../../contexts/CanvasContext";
import * as fabric from "fabric";
import { exportCanvas, addCanvasSnapshotToCurrentProject, deleteCanvasFromCurrentProject, getProject } from "../../utils/projectStorage";
import styles from "./Accessories.module.css";

const TopToolbar = ({ className }) => {
  const { canvas } = useCanvasContext();
  const [working, setWorking] = useState(false);

  // Helper: create a blank Fabric canvas state (same size as current) without objects
  const buildBlankSnapshot = () => {
    if (!canvas) return null;
    const width = canvas.getWidth?.() || 0;
    const height = canvas.getHeight?.() || 0;
    const tmp = { json: { objects: [], version: canvas.version || fabric.version }, preview: "", width, height };
    return tmp;
  };

  const handleNewSign = async () => {
    if (working) return; setWorking(true);
    try {
      const blank = buildBlankSnapshot();
      if (!blank) return;
      await addCanvasSnapshotToCurrentProject(blank, { setAsCurrent: true });
      // Clear current fabric canvas visually
      if (canvas) {
        canvas.__suspendUndoRedo = true;
        canvas.clear();
        canvas.setWidth(blank.width);
        canvas.setHeight(blank.height);
        canvas.renderAll();
        canvas.__suspendUndoRedo = false;
      }
    } catch (e) {
      console.error("New Sign failed", e);
    } finally { setWorking(false); }
  };

  const handleDeleteSign = async () => {
    if (working) return; setWorking(true);
    try {
      let currentCanvasId = null; let currentProjectId = null;
      try { currentCanvasId = localStorage.getItem("currentCanvasId"); currentProjectId = localStorage.getItem("currentProjectId"); } catch {}
      if (!currentCanvasId || !currentProjectId) { setWorking(false); return; }
      await deleteCanvasFromCurrentProject(currentCanvasId);
      // Decide next canvas to load (first in list) or blank if none
      const project = await getProject(currentProjectId);
      const next = project?.canvases?.[0];
      if (next) {
        try { localStorage.setItem("currentCanvasId", next.id); } catch {}
        if (canvas && next.json) {
          canvas.__suspendUndoRedo = true;
          canvas.loadFromJSON(next.json, () => { canvas.renderAll(); canvas.__suspendUndoRedo = false; });
        }
      } else {
        // No canvases left: clear canvas and remove currentCanvasId
        try { localStorage.removeItem("currentCanvasId"); } catch {}
        if (canvas) { canvas.clear(); canvas.renderAll(); }
      }
    } catch (e) {
      console.error("Delete Sign failed", e);
    } finally { setWorking(false); }
  };
  return (
    <div className={`${styles.accessories} ${className}`}>
      <div className={styles.firstPart}>
        <ul className={styles.toolbarList}>
          <li className={styles.toolbarItem} onClick={handleNewSign} title="Create new canvas (sign)">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_82_556)">
                <path
                  d="M5 -0.5H13.043L13.543 0H5C4.46957 0 3.96101 0.210865 3.58594 0.585938C3.21086 0.96101 3 1.46957 3 2V20C3 20.5304 3.21087 21.039 3.58594 21.4141C3.96101 21.7891 4.46957 22 5 22H17C17.5304 22 18.039 21.7891 18.4141 21.4141C18.7891 21.039 19 20.5304 19 20V5.45703L19.5 5.95703V20C19.5 20.663 19.2364 21.2987 18.7676 21.7676C18.2987 22.2364 17.663 22.5 17 22.5H5C4.33696 22.5 3.70126 22.2364 3.23242 21.7676C2.76358 21.2987 2.5 20.663 2.5 20V2C2.5 1.33696 2.76358 0.701263 3.23242 0.232422C3.70126 -0.236419 4.33696 -0.5 5 -0.5ZM11 9.25C11.0663 9.25 11.1299 9.27636 11.1768 9.32324C11.2236 9.37013 11.25 9.43369 11.25 9.5V12.25H14C14.0663 12.25 14.1299 12.2764 14.1768 12.3232C14.2236 12.3701 14.25 12.4337 14.25 12.5C14.25 12.5663 14.2236 12.6299 14.1768 12.6768C14.1299 12.7236 14.0663 12.75 14 12.75H11.25V15.5C11.25 15.5663 11.2236 15.6299 11.1768 15.6768C11.1299 15.7236 11.0663 15.75 11 15.75C10.9337 15.75 10.8701 15.7236 10.8232 15.6768C10.7764 15.6299 10.75 15.5663 10.75 15.5V12.75H8C7.93369 12.75 7.87013 12.7236 7.82324 12.6768C7.77636 12.6299 7.75 12.5663 7.75 12.5C7.75 12.4337 7.77636 12.3701 7.82324 12.3232C7.87013 12.2764 7.93369 12.25 8 12.25H10.75V9.5C10.75 9.4337 10.7764 9.37013 10.8232 9.32324C10.8701 9.27636 10.9337 9.25 11 9.25ZM18.793 5.25H15.5C15.0359 5.25 14.5909 5.06549 14.2627 4.7373C13.9345 4.40912 13.75 3.96413 13.75 3.5V0.207031L18.793 5.25Z"
                  fill="#34C759"
                  stroke="#017F01"
                />
              </g>
              <defs>
                <clipPath id="clip0_82_556">
                  <rect width="24" height="24" fill="white" />
                </clipPath>
              </defs>
            </svg>
            New Sign
          </li>
          <li className={styles.toolbarItem} onClick={handleDeleteSign} title="Delete current canvas (sign)">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M18.5172 12.7795L19.26 12.8829L18.5172 12.7795ZM18.2549 14.6645L18.9977 14.7679L18.2549 14.6645ZM5.74514 14.6645L6.48798 14.5611L5.74514 14.6645ZM5.4828 12.7795L4.73996 12.8829L5.4828 12.7795ZM9.18365 21.7368L8.89206 22.4278L9.18365 21.7368ZM6.47508 18.5603L7.17907 18.3017L6.47508 18.5603ZM17.5249 18.5603L18.2289 18.819V18.819L17.5249 18.5603ZM14.8164 21.7368L14.5248 21.0458H14.5248L14.8164 21.7368ZM5.74664 8.92906C5.70746 8.5167 5.34142 8.21418 4.92906 8.25336C4.5167 8.29254 4.21418 8.65858 4.25336 9.07094L5.74664 8.92906ZM19.7466 9.07094C19.7858 8.65858 19.4833 8.29254 19.0709 8.25336C18.6586 8.21418 18.2925 8.5167 18.2534 8.92906L19.7466 9.07094ZM20 7.75C20.4142 7.75 20.75 7.41421 20.75 7C20.75 6.58579 20.4142 6.25 20 6.25V7.75ZM4 6.25C3.58579 6.25 3.25 6.58579 3.25 7C3.25 7.41421 3.58579 7.75 4 7.75V6.25ZM9.25 18C9.25 18.4142 9.58579 18.75 10 18.75C10.4142 18.75 10.75 18.4142 10.75 18H9.25ZM10.75 10C10.75 9.58579 10.4142 9.25 10 9.25C9.58579 9.25 9.25 9.58579 9.25 10H10.75ZM13.25 18C13.25 18.4142 13.5858 18.75 14 18.75C14.4142 18.75 14.75 18.4142 14.75 18H13.25ZM14.75 10C14.75 9.58579 14.4142 9.25 14 9.25C13.5858 9.25 13.25 9.58579 13.25 10H14.75ZM16 7V7.75H16.75V7H16ZM8 7H7.25V7.75H8V7ZM18.5172 12.7795L17.7744 12.6761L17.512 14.5611L18.2549 14.6645L18.9977 14.7679L19.26 12.8829L18.5172 12.7795ZM5.74514 14.6645L6.48798 14.5611L6.22564 12.6761L5.4828 12.7795L4.73996 12.8829L5.0023 14.7679L5.74514 14.6645ZM12 22V21.25C10.4708 21.25 9.92544 21.2358 9.47524 21.0458L9.18365 21.7368L8.89206 22.4278C9.68914 22.7642 10.6056 22.75 12 22.75V22ZM5.74514 14.6645L5.0023 14.7679C5.282 16.7777 5.43406 17.9017 5.77109 18.819L6.47508 18.5603L7.17907 18.3017C6.91156 17.5736 6.77851 16.6488 6.48798 14.5611L5.74514 14.6645ZM9.18365 21.7368L9.47524 21.0458C8.55279 20.6566 7.69496 19.7058 7.17907 18.3017L6.47508 18.5603L5.77109 18.819C6.3857 20.4918 7.48205 21.8328 8.89206 22.4278L9.18365 21.7368ZM18.2549 14.6645L17.512 14.5611C17.2215 16.6488 17.0884 17.5736 16.8209 18.3017L17.5249 18.5603L18.2289 18.819C18.5659 17.9017 18.718 16.7777 18.9977 14.7679L18.2549 14.6645ZM12 22V22.75C13.3944 22.75 14.3109 22.7642 15.1079 22.4278L14.8164 21.7368L14.5248 21.0458C14.0746 21.2358 13.5292 21.25 12 21.25V22ZM17.5249 18.5603L16.8209 18.3017C16.305 19.7058 15.4472 20.6566 14.5248 21.0458L14.8164 21.7368L15.1079 22.4278C16.5179 21.8328 17.6143 20.4918 18.2289 18.819L17.5249 18.5603ZM5.4828 12.7795L6.22564 12.6761C6.00352 11.08 5.83766 9.88703 5.74664 8.92906L5 9L4.25336 9.07094C4.34819 10.069 4.51961 11.2995 4.73996 12.8829L5.4828 12.7795ZM18.5172 12.7795L19.26 12.8829C19.4804 11.2995 19.6518 10.069 19.7466 9.07094L19 9L18.2534 8.92906C18.1623 9.88702 17.9965 11.08 17.7744 12.6761L18.5172 12.7795ZM20 7V6.25H4V7V7.75H20V7ZM10 18H10.75V10H10H9.25V18H10ZM14 18H14.75V10H14H13.25V18H14ZM16 6H15.25V7H16H16.75V6H16ZM16 7V6.25H8V7V7.75H16V7ZM8 7H8.75V6H8H7.25V7H8ZM12 2V2.75C13.7949 2.75 15.25 4.20507 15.25 6H16H16.75C16.75 3.37665 14.6234 1.25 12 1.25V2ZM12 2V1.25C9.37665 1.25 7.25 3.37665 7.25 6H8H8.75C8.75 4.20507 10.2051 2.75 12 2.75V2Z"
                fill="#FF3B30"
              />
            </svg>
            Delete sign
          </li>
          <li className={styles.toolbarItem}>
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_82_562)">
                <path
                  d="M21 21V6.75L14.25 0H6C5.20435 0 4.44129 0.316071 3.87868 0.87868C3.31607 1.44129 3 2.20435 3 3V21C3 21.7956 3.31607 22.5587 3.87868 23.1213C4.44129 23.6839 5.20435 24 6 24H18C18.7956 24 19.5587 23.6839 20.1213 23.1213C20.6839 22.5587 21 21.7956 21 21ZM14.25 4.5C14.25 5.09674 14.4871 5.66903 14.909 6.09099C15.331 6.51295 15.9033 6.75 16.5 6.75H19.5V13.5H4.5V3C4.5 2.60218 4.65804 2.22064 4.93934 1.93934C5.22064 1.65804 5.60218 1.5 6 1.5H14.25V4.5ZM4.5 18V15H7.5V18H4.5ZM4.5 19.5H7.5V22.5H6C5.60218 22.5 5.22064 22.342 4.93934 22.0607C4.65804 21.7794 4.5 21.3978 4.5 21V19.5ZM9 22.5V19.5H13.5V22.5H9ZM15 22.5V19.5H19.5V21C19.5 21.3978 19.342 21.7794 19.0607 22.0607C18.7794 22.342 18.3978 22.5 18 22.5H15ZM19.5 18H15V15H19.5V18ZM9 18V15H13.5V18H9Z"
                  fill="#009951"
                />
              </g>
              <defs>
                <clipPath id="clip0_82_562">
                  <rect width="24" height="24" fill="white" />
                </clipPath>
              </defs>
            </svg>
            Import via Excel
          </li>
          <li className={styles.toolbarItem}>
            <svg
              width="21"
              height="24"
              viewBox="0 0 21 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M17.118 21.8578V15.4348H19.26V23.9998H0V15.4348H2.142V21.8578H17.118Z"
                fill="#007AFF"
              />
              <path
                d="M4.28613 19.7173H14.9916V17.5753H4.28613V19.7173ZM13.8816 -0.000244141L12.1626 1.27776L18.5526 9.86827L20.2716 8.59027L13.8816 -0.000244141ZM8.57163 5.06526L16.7976 11.9158L18.1671 10.2703L9.94113 3.41976L8.57013 5.06526H8.57163ZM5.88363 9.82477L15.5886 14.3443L16.4931 12.4033L6.78813 7.88377L5.88363 9.82477ZM4.49613 14.8408L14.9736 17.0443L15.4146 14.9473L4.93713 12.7453L4.49613 14.8408Z"
                fill="#007AFF"
              />
            </svg>
            Templates
          </li>
        </ul>
      </div>
      <div className={styles.secondPart}>
        <h3 className={styles.title}>Accessories:</h3>
        <ul className={styles.accessoriesList}>
          <li className={styles.accessoriesEl}>
            <input type="checkbox" />
            <svg
              width="28"
              height="31"
              viewBox="0 0 28 31"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <mask id="path-1-inside-1_82_880" fill="white">
                <path d="M12.5211 16.1502L10.3319 15.7224C10.2021 15.6974 10.076 15.7799 10.0496 15.9077L9.60919 18.039C9.59638 18.1009 9.60914 18.1652 9.64452 18.2177C9.67997 18.2704 9.73518 18.3067 9.79797 18.3191L11.9872 18.7469C12.0035 18.7501 12.0199 18.7515 12.036 18.7514C12.1472 18.7506 12.2464 18.6733 12.2695 18.5616L12.7099 16.4302C12.7227 16.3684 12.7099 16.3041 12.6746 16.2515C12.6391 16.1989 12.5839 16.1625 12.5211 16.1502ZM11.8462 18.2357L10.1286 17.9L10.473 16.2335L12.1905 16.5692L11.8462 18.2357ZM0.839598 27.4121L0.289105 30.0762C0.273291 30.153 0.296804 30.2325 0.352111 30.2886C0.398211 30.3355 0.461395 30.3611 0.526541 30.3606C0.539462 30.3605 0.552495 30.3594 0.565461 30.3572L3.22099 29.906C3.26385 29.8988 3.30397 29.8801 3.33699 29.8521L10.0198 24.1828L12.1987 24.6086C12.292 24.6268 12.3848 24.6352 12.4763 24.6345C13.105 24.6296 13.6677 24.1955 13.7967 23.5709L14.0882 22.1606C15.5007 22.0621 16.9395 21.6532 18.3681 20.9425C21.2439 19.5118 23.7705 16.9817 25.4824 13.818C26.7438 11.4869 27.2642 8.9282 26.9478 6.61325C26.5991 4.06256 25.2967 2.08876 23.2806 1.05553C21.2655 0.0229405 18.8582 0.0943088 16.5018 1.2569C14.3625 2.31229 12.4898 4.17701 11.2287 6.50759C9.96738 8.83864 9.44696 11.3974 9.76332 13.7124C9.79001 13.9077 9.8233 14.101 9.86149 14.2911C9.33369 14.3316 8.87412 14.7076 8.76445 15.2385L8.00927 18.8933C7.36561 18.8807 6.78246 19.3191 6.65077 19.9562L6.2107 22.0859C6.16389 22.3125 6.17846 22.5408 6.2505 22.7561L0.918389 27.2796C0.877966 27.314 0.850199 27.3605 0.839598 27.4121ZM10.1494 23.4475L6.91737 22.8159L8.04745 21.8572L11.2794 22.4888L10.1494 23.4475ZM6.45414 23.2089L9.68612 23.8406L8.55605 24.7992L5.32407 24.1677L6.45414 23.2089ZM8.09276 25.1922L6.96268 26.1508L3.73076 25.5192L4.86084 24.5605L8.09276 25.1922ZM6.49945 26.5438L5.36938 27.5025L2.13746 26.8709L3.26753 25.9123L6.49945 26.5438ZM18.1516 20.5192C16.8255 21.1788 15.4938 21.5675 14.188 21.6777L14.2368 21.4413C14.308 21.0965 14.2382 20.7449 14.0401 20.4512C13.8844 20.2205 13.6641 20.0479 13.4063 19.9488L13.5615 19.1979C14.6082 19.095 15.6716 18.7779 16.7255 18.2535C16.8101 18.2114 16.8942 18.1678 16.9781 18.1233L19.4666 19.7696C19.0381 20.0458 18.5992 20.2965 18.1516 20.5192ZM13.9849 15.4093C13.8051 15.1427 13.5296 14.9615 13.2091 14.8988L13.17 14.8912C12.9434 12.7485 13.4541 10.3972 14.6162 8.24954C15.8307 6.00493 17.6291 4.21151 19.6802 3.19984C19.884 3.09926 20.0884 3.00728 20.293 2.92383C20.3167 2.93544 20.3406 2.94652 20.364 2.95849C21.8207 3.70491 22.7632 5.14245 23.0181 7.0062C23.2547 8.73771 22.8624 10.6572 21.9134 12.4111C20.6097 14.8204 18.6904 16.745 16.509 17.8302C15.5584 18.3032 14.6024 18.598 13.6624 18.7096L14.161 16.2964C14.2249 15.9874 14.1623 15.6724 13.9849 15.4093ZM23.2261 10.4386L26.2181 10.6319C26.0507 11.2998 25.8221 11.9661 25.5346 12.6204L22.5797 12.159C22.8496 11.5956 23.0657 11.0188 23.2261 10.4386ZM19.0461 16.7186L21.8439 17.8703C21.2288 18.4681 20.5768 19.0081 19.8955 19.4824L17.4445 17.8609C18.0004 17.5306 18.5362 17.148 19.0461 16.7186ZM19.4447 16.3686C19.9694 15.8885 20.4636 15.3581 20.9199 14.7838L23.7797 15.6273C23.2934 16.2981 22.7674 16.9265 22.2073 17.5058L19.4447 16.3686ZM24.0686 15.2175L21.2293 14.38C21.634 13.8319 22.0054 13.2483 22.3377 12.6343C22.3432 12.6242 22.3484 12.6139 22.3538 12.6038L25.3277 13.0682C25.242 13.2448 25.1525 13.4205 25.0582 13.5948C24.7538 14.1574 24.4228 14.6991 24.0686 15.2175ZM26.3256 10.1636L23.3435 9.97097C23.4849 9.33995 23.5595 8.70832 23.5653 8.08902L26.5566 7.87282C26.5635 8.62451 26.4856 9.39341 26.3256 10.1636ZM26.5405 7.39851L23.5562 7.61418C23.5452 7.38805 23.5248 7.16394 23.4946 6.94276C23.4386 6.53331 23.3511 6.14303 23.2346 5.77348L26.2425 5.55608C26.3413 5.91438 26.4181 6.28821 26.4712 6.67675C26.5038 6.9147 26.5264 7.15556 26.5405 7.39851ZM26.0984 5.091L23.0688 5.30999C22.6176 4.19073 21.874 3.2967 20.8886 2.70581C22.0979 2.31196 23.3019 2.22126 24.4282 2.44334C25.1714 3.14453 25.7371 4.04083 26.0984 5.091ZM11.6528 6.73083C12.8674 4.48627 14.6657 2.69285 16.7168 1.68112C18.9317 0.58833 21.184 0.515729 23.0587 1.47648C23.2884 1.59416 23.5079 1.72537 23.7172 1.86906C22.3401 1.76683 20.8872 2.07411 19.4651 2.77562C17.3259 3.83101 15.4531 5.69573 14.192 8.02637C13.0113 10.2085 12.479 12.5985 12.6778 14.795L10.363 14.3427C10.3135 14.1166 10.2718 13.8842 10.2396 13.649C9.93675 11.4317 10.4385 8.97484 11.6528 6.73083ZM9.23547 15.3332C9.31513 14.9476 9.70241 14.6971 10.1002 14.7748L13.1156 15.3641C13.3097 15.4019 13.4762 15.5113 13.5846 15.672C13.6907 15.8293 13.7281 16.0174 13.6901 16.2017L12.9393 19.8351L8.48517 18.9646L9.23547 15.3332ZM6.68179 22.1806L7.12186 20.0509C7.21699 19.5902 7.68052 19.2908 8.15526 19.3838L13.0795 20.3462C13.3114 20.3914 13.5103 20.5221 13.6398 20.7141C13.7665 20.9019 13.8113 21.1265 13.7658 21.3467L13.3256 23.4764C13.2303 23.9371 12.7668 24.2363 12.2922 24.1435L10.483 23.7899L11.9674 22.5307C12.0372 22.4715 12.0666 22.3783 12.0432 22.2905C12.0198 22.2029 11.9477 22.136 11.8574 22.1183L8.02631 21.3696C7.95414 21.3555 7.87892 21.3749 7.82279 21.4224L6.66668 22.4032C6.66179 22.3295 6.66644 22.2549 6.68179 22.1806ZM1.67423 27.2639L4.90615 27.8954L3.07382 29.4498L0.830348 29.8309L1.29423 27.5862L1.67423 27.2639Z" />
              </mask>
              <path
                d="M12.5211 16.1502L10.3319 15.7224C10.2021 15.6974 10.076 15.7799 10.0496 15.9077L9.60919 18.039C9.59638 18.1009 9.60914 18.1652 9.64452 18.2177C9.67997 18.2704 9.73518 18.3067 9.79797 18.3191L11.9872 18.7469C12.0035 18.7501 12.0199 18.7515 12.036 18.7514C12.1472 18.7506 12.2464 18.6733 12.2695 18.5616L12.7099 16.4302C12.7227 16.3684 12.7099 16.3041 12.6746 16.2515C12.6391 16.1989 12.5839 16.1625 12.5211 16.1502ZM11.8462 18.2357L10.1286 17.9L10.473 16.2335L12.1905 16.5692L11.8462 18.2357ZM0.839598 27.4121L0.289105 30.0762C0.273291 30.153 0.296804 30.2325 0.352111 30.2886C0.398211 30.3355 0.461395 30.3611 0.526541 30.3606C0.539462 30.3605 0.552495 30.3594 0.565461 30.3572L3.22099 29.906C3.26385 29.8988 3.30397 29.8801 3.33699 29.8521L10.0198 24.1828L12.1987 24.6086C12.292 24.6268 12.3848 24.6352 12.4763 24.6345C13.105 24.6296 13.6677 24.1955 13.7967 23.5709L14.0882 22.1606C15.5007 22.0621 16.9395 21.6532 18.3681 20.9425C21.2439 19.5118 23.7705 16.9817 25.4824 13.818C26.7438 11.4869 27.2642 8.9282 26.9478 6.61325C26.5991 4.06256 25.2967 2.08876 23.2806 1.05553C21.2655 0.0229405 18.8582 0.0943088 16.5018 1.2569C14.3625 2.31229 12.4898 4.17701 11.2287 6.50759C9.96738 8.83864 9.44696 11.3974 9.76332 13.7124C9.79001 13.9077 9.8233 14.101 9.86149 14.2911C9.33369 14.3316 8.87412 14.7076 8.76445 15.2385L8.00927 18.8933C7.36561 18.8807 6.78246 19.3191 6.65077 19.9562L6.2107 22.0859C6.16389 22.3125 6.17846 22.5408 6.2505 22.7561L0.918389 27.2796C0.877966 27.314 0.850199 27.3605 0.839598 27.4121ZM10.1494 23.4475L6.91737 22.8159L8.04745 21.8572L11.2794 22.4888L10.1494 23.4475ZM6.45414 23.2089L9.68612 23.8406L8.55605 24.7992L5.32407 24.1677L6.45414 23.2089ZM8.09276 25.1922L6.96268 26.1508L3.73076 25.5192L4.86084 24.5605L8.09276 25.1922ZM6.49945 26.5438L5.36938 27.5025L2.13746 26.8709L3.26753 25.9123L6.49945 26.5438ZM18.1516 20.5192C16.8255 21.1788 15.4938 21.5675 14.188 21.6777L14.2368 21.4413C14.308 21.0965 14.2382 20.7449 14.0401 20.4512C13.8844 20.2205 13.6641 20.0479 13.4063 19.9488L13.5615 19.1979C14.6082 19.095 15.6716 18.7779 16.7255 18.2535C16.8101 18.2114 16.8942 18.1678 16.9781 18.1233L19.4666 19.7696C19.0381 20.0458 18.5992 20.2965 18.1516 20.5192ZM13.9849 15.4093C13.8051 15.1427 13.5296 14.9615 13.2091 14.8988L13.17 14.8912C12.9434 12.7485 13.4541 10.3972 14.6162 8.24954C15.8307 6.00493 17.6291 4.21151 19.6802 3.19984C19.884 3.09926 20.0884 3.00728 20.293 2.92383C20.3167 2.93544 20.3406 2.94652 20.364 2.95849C21.8207 3.70491 22.7632 5.14245 23.0181 7.0062C23.2547 8.73771 22.8624 10.6572 21.9134 12.4111C20.6097 14.8204 18.6904 16.745 16.509 17.8302C15.5584 18.3032 14.6024 18.598 13.6624 18.7096L14.161 16.2964C14.2249 15.9874 14.1623 15.6724 13.9849 15.4093ZM23.2261 10.4386L26.2181 10.6319C26.0507 11.2998 25.8221 11.9661 25.5346 12.6204L22.5797 12.159C22.8496 11.5956 23.0657 11.0188 23.2261 10.4386ZM19.0461 16.7186L21.8439 17.8703C21.2288 18.4681 20.5768 19.0081 19.8955 19.4824L17.4445 17.8609C18.0004 17.5306 18.5362 17.148 19.0461 16.7186ZM19.4447 16.3686C19.9694 15.8885 20.4636 15.3581 20.9199 14.7838L23.7797 15.6273C23.2934 16.2981 22.7674 16.9265 22.2073 17.5058L19.4447 16.3686ZM24.0686 15.2175L21.2293 14.38C21.634 13.8319 22.0054 13.2483 22.3377 12.6343C22.3432 12.6242 22.3484 12.6139 22.3538 12.6038L25.3277 13.0682C25.242 13.2448 25.1525 13.4205 25.0582 13.5948C24.7538 14.1574 24.4228 14.6991 24.0686 15.2175ZM26.3256 10.1636L23.3435 9.97097C23.4849 9.33995 23.5595 8.70832 23.5653 8.08902L26.5566 7.87282C26.5635 8.62451 26.4856 9.39341 26.3256 10.1636ZM26.5405 7.39851L23.5562 7.61418C23.5452 7.38805 23.5248 7.16394 23.4946 6.94276C23.4386 6.53331 23.3511 6.14303 23.2346 5.77348L26.2425 5.55608C26.3413 5.91438 26.4181 6.28821 26.4712 6.67675C26.5038 6.9147 26.5264 7.15556 26.5405 7.39851ZM26.0984 5.091L23.0688 5.30999C22.6176 4.19073 21.874 3.2967 20.8886 2.70581C22.0979 2.31196 23.3019 2.22126 24.4282 2.44334C25.1714 3.14453 25.7371 4.04083 26.0984 5.091ZM11.6528 6.73083C12.8674 4.48627 14.6657 2.69285 16.7168 1.68112C18.9317 0.58833 21.184 0.515729 23.0587 1.47648C23.2884 1.59416 23.5079 1.72537 23.7172 1.86906C22.3401 1.76683 20.8872 2.07411 19.4651 2.77562C17.3259 3.83101 15.4531 5.69573 14.192 8.02637C13.0113 10.2085 12.479 12.5985 12.6778 14.795L10.363 14.3427C10.3135 14.1166 10.2718 13.8842 10.2396 13.649C9.93675 11.4317 10.4385 8.97484 11.6528 6.73083ZM9.23547 15.3332C9.31513 14.9476 9.70241 14.6971 10.1002 14.7748L13.1156 15.3641C13.3097 15.4019 13.4762 15.5113 13.5846 15.672C13.6907 15.8293 13.7281 16.0174 13.6901 16.2017L12.9393 19.8351L8.48517 18.9646L9.23547 15.3332ZM6.68179 22.1806L7.12186 20.0509C7.21699 19.5902 7.68052 19.2908 8.15526 19.3838L13.0795 20.3462C13.3114 20.3914 13.5103 20.5221 13.6398 20.7141C13.7665 20.9019 13.8113 21.1265 13.7658 21.3467L13.3256 23.4764C13.2303 23.9371 12.7668 24.2363 12.2922 24.1435L10.483 23.7899L11.9674 22.5307C12.0372 22.4715 12.0666 22.3783 12.0432 22.2905C12.0198 22.2029 11.9477 22.136 11.8574 22.1183L8.02631 21.3696C7.95414 21.3555 7.87892 21.3749 7.82279 21.4224L6.66668 22.4032C6.66179 22.3295 6.66644 22.2549 6.68179 22.1806ZM1.67423 27.2639L4.90615 27.8954L3.07382 29.4498L0.830348 29.8309L1.29423 27.5862L1.67423 27.2639Z"
                stroke="black"
                stroke-width="2"
                mask="url(#path-1-inside-1_82_880)"
              />
            </svg>
            Cable ties
            <div className={styles.inputGroup}>
              <input type="number" />
              <div className={styles.arrows}>
                <i
                  className="fa-solid fa-chevron-up"
                  onClick={() => changeValue("width", 1, 300)}
                />
                <i
                  className="fa-solid fa-chevron-down"
                  onClick={() => changeValue("width", -1, 300)}
                />
              </div>
            </div>
            <span className={styles.price}>€ 0.30</span>
          </li>
          <li className={styles.accessoriesEl}>
            <input type="checkbox" />
            <svg
              width="28"
              height="31"
              viewBox="0 0 28 31"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <mask id="path-1-inside-1_82_880" fill="white">
                <path d="M12.5211 16.1502L10.3319 15.7224C10.2021 15.6974 10.076 15.7799 10.0496 15.9077L9.60919 18.039C9.59638 18.1009 9.60914 18.1652 9.64452 18.2177C9.67997 18.2704 9.73518 18.3067 9.79797 18.3191L11.9872 18.7469C12.0035 18.7501 12.0199 18.7515 12.036 18.7514C12.1472 18.7506 12.2464 18.6733 12.2695 18.5616L12.7099 16.4302C12.7227 16.3684 12.7099 16.3041 12.6746 16.2515C12.6391 16.1989 12.5839 16.1625 12.5211 16.1502ZM11.8462 18.2357L10.1286 17.9L10.473 16.2335L12.1905 16.5692L11.8462 18.2357ZM0.839598 27.4121L0.289105 30.0762C0.273291 30.153 0.296804 30.2325 0.352111 30.2886C0.398211 30.3355 0.461395 30.3611 0.526541 30.3606C0.539462 30.3605 0.552495 30.3594 0.565461 30.3572L3.22099 29.906C3.26385 29.8988 3.30397 29.8801 3.33699 29.8521L10.0198 24.1828L12.1987 24.6086C12.292 24.6268 12.3848 24.6352 12.4763 24.6345C13.105 24.6296 13.6677 24.1955 13.7967 23.5709L14.0882 22.1606C15.5007 22.0621 16.9395 21.6532 18.3681 20.9425C21.2439 19.5118 23.7705 16.9817 25.4824 13.818C26.7438 11.4869 27.2642 8.9282 26.9478 6.61325C26.5991 4.06256 25.2967 2.08876 23.2806 1.05553C21.2655 0.0229405 18.8582 0.0943088 16.5018 1.2569C14.3625 2.31229 12.4898 4.17701 11.2287 6.50759C9.96738 8.83864 9.44696 11.3974 9.76332 13.7124C9.79001 13.9077 9.8233 14.101 9.86149 14.2911C9.33369 14.3316 8.87412 14.7076 8.76445 15.2385L8.00927 18.8933C7.36561 18.8807 6.78246 19.3191 6.65077 19.9562L6.2107 22.0859C6.16389 22.3125 6.17846 22.5408 6.2505 22.7561L0.918389 27.2796C0.877966 27.314 0.850199 27.3605 0.839598 27.4121ZM10.1494 23.4475L6.91737 22.8159L8.04745 21.8572L11.2794 22.4888L10.1494 23.4475ZM6.45414 23.2089L9.68612 23.8406L8.55605 24.7992L5.32407 24.1677L6.45414 23.2089ZM8.09276 25.1922L6.96268 26.1508L3.73076 25.5192L4.86084 24.5605L8.09276 25.1922ZM6.49945 26.5438L5.36938 27.5025L2.13746 26.8709L3.26753 25.9123L6.49945 26.5438ZM18.1516 20.5192C16.8255 21.1788 15.4938 21.5675 14.188 21.6777L14.2368 21.4413C14.308 21.0965 14.2382 20.7449 14.0401 20.4512C13.8844 20.2205 13.6641 20.0479 13.4063 19.9488L13.5615 19.1979C14.6082 19.095 15.6716 18.7779 16.7255 18.2535C16.8101 18.2114 16.8942 18.1678 16.9781 18.1233L19.4666 19.7696C19.0381 20.0458 18.5992 20.2965 18.1516 20.5192ZM13.9849 15.4093C13.8051 15.1427 13.5296 14.9615 13.2091 14.8988L13.17 14.8912C12.9434 12.7485 13.4541 10.3972 14.6162 8.24954C15.8307 6.00493 17.6291 4.21151 19.6802 3.19984C19.884 3.09926 20.0884 3.00728 20.293 2.92383C20.3167 2.93544 20.3406 2.94652 20.364 2.95849C21.8207 3.70491 22.7632 5.14245 23.0181 7.0062C23.2547 8.73771 22.8624 10.6572 21.9134 12.4111C20.6097 14.8204 18.6904 16.745 16.509 17.8302C15.5584 18.3032 14.6024 18.598 13.6624 18.7096L14.161 16.2964C14.2249 15.9874 14.1623 15.6724 13.9849 15.4093ZM23.2261 10.4386L26.2181 10.6319C26.0507 11.2998 25.8221 11.9661 25.5346 12.6204L22.5797 12.159C22.8496 11.5956 23.0657 11.0188 23.2261 10.4386ZM19.0461 16.7186L21.8439 17.8703C21.2288 18.4681 20.5768 19.0081 19.8955 19.4824L17.4445 17.8609C18.0004 17.5306 18.5362 17.148 19.0461 16.7186ZM19.4447 16.3686C19.9694 15.8885 20.4636 15.3581 20.9199 14.7838L23.7797 15.6273C23.2934 16.2981 22.7674 16.9265 22.2073 17.5058L19.4447 16.3686ZM24.0686 15.2175L21.2293 14.38C21.634 13.8319 22.0054 13.2483 22.3377 12.6343C22.3432 12.6242 22.3484 12.6139 22.3538 12.6038L25.3277 13.0682C25.242 13.2448 25.1525 13.4205 25.0582 13.5948C24.7538 14.1574 24.4228 14.6991 24.0686 15.2175ZM26.3256 10.1636L23.3435 9.97097C23.4849 9.33995 23.5595 8.70832 23.5653 8.08902L26.5566 7.87282C26.5635 8.62451 26.4856 9.39341 26.3256 10.1636ZM26.5405 7.39851L23.5562 7.61418C23.5452 7.38805 23.5248 7.16394 23.4946 6.94276C23.4386 6.53331 23.3511 6.14303 23.2346 5.77348L26.2425 5.55608C26.3413 5.91438 26.4181 6.28821 26.4712 6.67675C26.5038 6.9147 26.5264 7.15556 26.5405 7.39851ZM26.0984 5.091L23.0688 5.30999C22.6176 4.19073 21.874 3.2967 20.8886 2.70581C22.0979 2.31196 23.3019 2.22126 24.4282 2.44334C25.1714 3.14453 25.7371 4.04083 26.0984 5.091ZM11.6528 6.73083C12.8674 4.48627 14.6657 2.69285 16.7168 1.68112C18.9317 0.58833 21.184 0.515729 23.0587 1.47648C23.2884 1.59416 23.5079 1.72537 23.7172 1.86906C22.3401 1.76683 20.8872 2.07411 19.4651 2.77562C17.3259 3.83101 15.4531 5.69573 14.192 8.02637C13.0113 10.2085 12.479 12.5985 12.6778 14.795L10.363 14.3427C10.3135 14.1166 10.2718 13.8842 10.2396 13.649C9.93675 11.4317 10.4385 8.97484 11.6528 6.73083ZM9.23547 15.3332C9.31513 14.9476 9.70241 14.6971 10.1002 14.7748L13.1156 15.3641C13.3097 15.4019 13.4762 15.5113 13.5846 15.672C13.6907 15.8293 13.7281 16.0174 13.6901 16.2017L12.9393 19.8351L8.48517 18.9646L9.23547 15.3332ZM6.68179 22.1806L7.12186 20.0509C7.21699 19.5902 7.68052 19.2908 8.15526 19.3838L13.0795 20.3462C13.3114 20.3914 13.5103 20.5221 13.6398 20.7141C13.7665 20.9019 13.8113 21.1265 13.7658 21.3467L13.3256 23.4764C13.2303 23.9371 12.7668 24.2363 12.2922 24.1435L10.483 23.7899L11.9674 22.5307C12.0372 22.4715 12.0666 22.3783 12.0432 22.2905C12.0198 22.2029 11.9477 22.136 11.8574 22.1183L8.02631 21.3696C7.95414 21.3555 7.87892 21.3749 7.82279 21.4224L6.66668 22.4032C6.66179 22.3295 6.66644 22.2549 6.68179 22.1806ZM1.67423 27.2639L4.90615 27.8954L3.07382 29.4498L0.830348 29.8309L1.29423 27.5862L1.67423 27.2639Z" />
              </mask>
              <path
                d="M12.5211 16.1502L10.3319 15.7224C10.2021 15.6974 10.076 15.7799 10.0496 15.9077L9.60919 18.039C9.59638 18.1009 9.60914 18.1652 9.64452 18.2177C9.67997 18.2704 9.73518 18.3067 9.79797 18.3191L11.9872 18.7469C12.0035 18.7501 12.0199 18.7515 12.036 18.7514C12.1472 18.7506 12.2464 18.6733 12.2695 18.5616L12.7099 16.4302C12.7227 16.3684 12.7099 16.3041 12.6746 16.2515C12.6391 16.1989 12.5839 16.1625 12.5211 16.1502ZM11.8462 18.2357L10.1286 17.9L10.473 16.2335L12.1905 16.5692L11.8462 18.2357ZM0.839598 27.4121L0.289105 30.0762C0.273291 30.153 0.296804 30.2325 0.352111 30.2886C0.398211 30.3355 0.461395 30.3611 0.526541 30.3606C0.539462 30.3605 0.552495 30.3594 0.565461 30.3572L3.22099 29.906C3.26385 29.8988 3.30397 29.8801 3.33699 29.8521L10.0198 24.1828L12.1987 24.6086C12.292 24.6268 12.3848 24.6352 12.4763 24.6345C13.105 24.6296 13.6677 24.1955 13.7967 23.5709L14.0882 22.1606C15.5007 22.0621 16.9395 21.6532 18.3681 20.9425C21.2439 19.5118 23.7705 16.9817 25.4824 13.818C26.7438 11.4869 27.2642 8.9282 26.9478 6.61325C26.5991 4.06256 25.2967 2.08876 23.2806 1.05553C21.2655 0.0229405 18.8582 0.0943088 16.5018 1.2569C14.3625 2.31229 12.4898 4.17701 11.2287 6.50759C9.96738 8.83864 9.44696 11.3974 9.76332 13.7124C9.79001 13.9077 9.8233 14.101 9.86149 14.2911C9.33369 14.3316 8.87412 14.7076 8.76445 15.2385L8.00927 18.8933C7.36561 18.8807 6.78246 19.3191 6.65077 19.9562L6.2107 22.0859C6.16389 22.3125 6.17846 22.5408 6.2505 22.7561L0.918389 27.2796C0.877966 27.314 0.850199 27.3605 0.839598 27.4121ZM10.1494 23.4475L6.91737 22.8159L8.04745 21.8572L11.2794 22.4888L10.1494 23.4475ZM6.45414 23.2089L9.68612 23.8406L8.55605 24.7992L5.32407 24.1677L6.45414 23.2089ZM8.09276 25.1922L6.96268 26.1508L3.73076 25.5192L4.86084 24.5605L8.09276 25.1922ZM6.49945 26.5438L5.36938 27.5025L2.13746 26.8709L3.26753 25.9123L6.49945 26.5438ZM18.1516 20.5192C16.8255 21.1788 15.4938 21.5675 14.188 21.6777L14.2368 21.4413C14.308 21.0965 14.2382 20.7449 14.0401 20.4512C13.8844 20.2205 13.6641 20.0479 13.4063 19.9488L13.5615 19.1979C14.6082 19.095 15.6716 18.7779 16.7255 18.2535C16.8101 18.2114 16.8942 18.1678 16.9781 18.1233L19.4666 19.7696C19.0381 20.0458 18.5992 20.2965 18.1516 20.5192ZM13.9849 15.4093C13.8051 15.1427 13.5296 14.9615 13.2091 14.8988L13.17 14.8912C12.9434 12.7485 13.4541 10.3972 14.6162 8.24954C15.8307 6.00493 17.6291 4.21151 19.6802 3.19984C19.884 3.09926 20.0884 3.00728 20.293 2.92383C20.3167 2.93544 20.3406 2.94652 20.364 2.95849C21.8207 3.70491 22.7632 5.14245 23.0181 7.0062C23.2547 8.73771 22.8624 10.6572 21.9134 12.4111C20.6097 14.8204 18.6904 16.745 16.509 17.8302C15.5584 18.3032 14.6024 18.598 13.6624 18.7096L14.161 16.2964C14.2249 15.9874 14.1623 15.6724 13.9849 15.4093ZM23.2261 10.4386L26.2181 10.6319C26.0507 11.2998 25.8221 11.9661 25.5346 12.6204L22.5797 12.159C22.8496 11.5956 23.0657 11.0188 23.2261 10.4386ZM19.0461 16.7186L21.8439 17.8703C21.2288 18.4681 20.5768 19.0081 19.8955 19.4824L17.4445 17.8609C18.0004 17.5306 18.5362 17.148 19.0461 16.7186ZM19.4447 16.3686C19.9694 15.8885 20.4636 15.3581 20.9199 14.7838L23.7797 15.6273C23.2934 16.2981 22.7674 16.9265 22.2073 17.5058L19.4447 16.3686ZM24.0686 15.2175L21.2293 14.38C21.634 13.8319 22.0054 13.2483 22.3377 12.6343C22.3432 12.6242 22.3484 12.6139 22.3538 12.6038L25.3277 13.0682C25.242 13.2448 25.1525 13.4205 25.0582 13.5948C24.7538 14.1574 24.4228 14.6991 24.0686 15.2175ZM26.3256 10.1636L23.3435 9.97097C23.4849 9.33995 23.5595 8.70832 23.5653 8.08902L26.5566 7.87282C26.5635 8.62451 26.4856 9.39341 26.3256 10.1636ZM26.5405 7.39851L23.5562 7.61418C23.5452 7.38805 23.5248 7.16394 23.4946 6.94276C23.4386 6.53331 23.3511 6.14303 23.2346 5.77348L26.2425 5.55608C26.3413 5.91438 26.4181 6.28821 26.4712 6.67675C26.5038 6.9147 26.5264 7.15556 26.5405 7.39851ZM26.0984 5.091L23.0688 5.30999C22.6176 4.19073 21.874 3.2967 20.8886 2.70581C22.0979 2.31196 23.3019 2.22126 24.4282 2.44334C25.1714 3.14453 25.7371 4.04083 26.0984 5.091ZM11.6528 6.73083C12.8674 4.48627 14.6657 2.69285 16.7168 1.68112C18.9317 0.58833 21.184 0.515729 23.0587 1.47648C23.2884 1.59416 23.5079 1.72537 23.7172 1.86906C22.3401 1.76683 20.8872 2.07411 19.4651 2.77562C17.3259 3.83101 15.4531 5.69573 14.192 8.02637C13.0113 10.2085 12.479 12.5985 12.6778 14.795L10.363 14.3427C10.3135 14.1166 10.2718 13.8842 10.2396 13.649C9.93675 11.4317 10.4385 8.97484 11.6528 6.73083ZM9.23547 15.3332C9.31513 14.9476 9.70241 14.6971 10.1002 14.7748L13.1156 15.3641C13.3097 15.4019 13.4762 15.5113 13.5846 15.672C13.6907 15.8293 13.7281 16.0174 13.6901 16.2017L12.9393 19.8351L8.48517 18.9646L9.23547 15.3332ZM6.68179 22.1806L7.12186 20.0509C7.21699 19.5902 7.68052 19.2908 8.15526 19.3838L13.0795 20.3462C13.3114 20.3914 13.5103 20.5221 13.6398 20.7141C13.7665 20.9019 13.8113 21.1265 13.7658 21.3467L13.3256 23.4764C13.2303 23.9371 12.7668 24.2363 12.2922 24.1435L10.483 23.7899L11.9674 22.5307C12.0372 22.4715 12.0666 22.3783 12.0432 22.2905C12.0198 22.2029 11.9477 22.136 11.8574 22.1183L8.02631 21.3696C7.95414 21.3555 7.87892 21.3749 7.82279 21.4224L6.66668 22.4032C6.66179 22.3295 6.66644 22.2549 6.68179 22.1806ZM1.67423 27.2639L4.90615 27.8954L3.07382 29.4498L0.830348 29.8309L1.29423 27.5862L1.67423 27.2639Z"
                stroke="black"
                stroke-width="2"
                mask="url(#path-1-inside-1_82_880)"
              />
            </svg>
            Cable ties
            <div className={styles.inputGroup}>
              <input type="number" />
              <div className={styles.arrows}>
                <i
                  className="fa-solid fa-chevron-up"
                  onClick={() => changeValue("width", 1, 300)}
                />
                <i
                  className="fa-solid fa-chevron-down"
                  onClick={() => changeValue("width", -1, 300)}
                />
              </div>
            </div>
            <span className={styles.price}>€ 0.30</span>
          </li>
        </ul>
        <div className={styles.moreAccessories}>
          <svg
            width="34"
            height="34"
            viewBox="0 0 34 34"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_82_640)">
              <path
                d="M16.6244 16.6238L20.5427 16.7054M16.706 20.5421L16.6244 16.6238L16.706 20.5421ZM16.5428 12.7054L16.6244 16.6238L16.5428 12.7054ZM16.6244 16.6238L12.7061 16.5421L16.6244 16.6238Z"
                stroke="#017F01"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M23.6951 23.6952C27.4409 19.9494 27.3117 13.7469 23.4065 9.84172C19.5012 5.93647 13.2988 5.80729 9.55296 9.5531C5.80711 13.299 5.93633 19.5014 9.84158 23.4066C13.7468 27.3118 19.9492 27.4411 23.6951 23.6952Z"
                stroke="#009951"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </g>
            <defs>
              <clipPath id="clip0_82_640">
                <rect
                  width="23.0204"
                  height="24"
                  fill="white"
                  transform="translate(0 16.2778) rotate(-45)"
                />
              </clipPath>
            </defs>
          </svg>
          More Accessories
        </div>
      </div>
    </div>
  );
};

export default TopToolbar;
