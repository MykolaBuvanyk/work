# –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª Undo/Redo

## –û–≥–ª—è–¥

–ù–æ–≤–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª Undo/Redo –∑–∞–±–µ–∑–ø–µ—á—É—î –Ω–∞–¥—ñ–π–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–º—ñ–Ω –Ω–∞ –ø–æ–ª–æ—Ç–Ω—ñ –∑ –ø–æ–∫—Ä–∞—â–µ–Ω–æ—é –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é —Ç–∞ –∑—Ä—É—á–Ω—ñ—Å—Ç—é –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

## –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### üìö –ö–µ—Ä—É–≤–∞–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—î—é

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è** –≤—Å—ñ—Ö –∑–º—ñ–Ω –Ω–∞ –ø–æ–ª–æ—Ç–Ω—ñ
- **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —ñ—Å—Ç–æ—Ä—ñ—ó** (–¥–æ 100 —Å—Ç–∞–Ω—ñ–≤)
- **–†–æ–∑—É–º–Ω–µ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Å—Ç–∞–Ω—ñ–≤** –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- **–ú–µ—Ç–∞–¥–∞–Ω—ñ** –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å—Ç–∞–Ω—É (—á–∞—Å, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ–±'—î–∫—Ç—ñ–≤, viewport)

### ‚å®Ô∏è –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω—ñ —Å–∫–æ—Ä–æ—á–µ–Ω–Ω—è

- **Undo**: `Ctrl+Z` (Windows/Linux) –∞–±–æ `Cmd+Z` (Mac)
- **Redo**: `Ctrl+Y` (Windows/Linux) –∞–±–æ `Cmd+Shift+Z` (Mac)
- **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è**: `Ctrl+S` (Windows/Linux) –∞–±–æ `Cmd+S` (Mac)

### üéõÔ∏è –ü–∞–Ω–µ–ª—å —ñ—Å—Ç–æ—Ä—ñ—ó

- –í—ñ–∑—É–∞–ª—å–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö —Å—Ç–∞–Ω—ñ–≤
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—É –¥–æ –±—É–¥—å-—è–∫–æ–≥–æ —Å—Ç–∞–Ω—É
- –ü–æ—à—É–∫ –ø–æ —ñ—Å—Ç–æ—Ä—ñ—ó
- –ï–∫—Å–ø–æ—Ä—Ç/—ñ–º–ø–æ—Ä—Ç —ñ—Å—Ç–æ—Ä—ñ—ó
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```jsx
import { useUndoRedo } from '../hooks/useUndoRedo';

const YourComponent = () => {
  const { 
    undo, 
    redo, 
    canUndo, 
    canRedo, 
    historyLength 
  } = useUndoRedo();

  return (
    <div>
      <button onClick={undo} disabled={!canUndo}>
        Undo
      </button>
      <button onClick={redo} disabled={!canRedo}>
        Redo
      </button>
      <span>History: {historyLength} states</span>
    </div>
  );
};
```

### –†–æ–∑—à–∏—Ä–µ–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```jsx
import { useUndoRedo } from '../hooks/useUndoRedo';

const AdvancedComponent = () => {
  const { 
    undo, 
    redo, 
    canUndo, 
    canRedo,
    goToHistoryState,
    clearHistory,
    saveCurrentState,
    exportHistory,
    importHistory,
    history
  } = useUndoRedo();

  // –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ç–∞–Ω—É
  const jumpToState = (index) => {
    goToHistoryState(index);
  };

  // –†—É—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω—É
  const saveNow = () => {
    saveCurrentState();
  };

  // –ï–∫—Å–ø–æ—Ä—Ç —ñ—Å—Ç–æ—Ä—ñ—ó —É —Ñ–∞–π–ª
  const handleExport = () => {
    const data = exportHistory();
    // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —É —Ñ–∞–π–ª...
  };

  return (
    <div>
      {/* –í–∞—à UI */}
    </div>
  );
};
```

### –ü–∞–Ω–µ–ª—å —ñ—Å—Ç–æ—Ä—ñ—ó

```jsx
import HistoryPanel from '../components/HistoryPanel';

const YourApp = () => {
  const [isHistoryOpen, setHistoryOpen] = useState(false);

  return (
    <div>
      <button onClick={() => setHistoryOpen(true)}>
        Show History
      </button>
      
      {isHistoryOpen && (
        <HistoryPanel 
          isOpen={isHistoryOpen}
          onClose={() => setHistoryOpen(false)}
        />
      )}
    </div>
  );
};
```

## API —Ö—É–∫–∞ useUndoRedo

### –ü–æ–≤–µ—Ä—Ç–∞—î

| –í–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å | –¢–∏–ø | –û–ø–∏—Å |
|------------|-----|------|
| `undo` | `Function` | –í—ñ–¥–º—ñ–Ω–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—é –æ–ø–µ—Ä–∞—Ü—ñ—é |
| `redo` | `Function` | –ü–æ–≤—Ç–æ—Ä–∏—Ç–∏ –≤—ñ–¥–º—ñ–Ω–µ–Ω—É –æ–ø–µ—Ä–∞—Ü—ñ—é |
| `canUndo` | `Boolean` | –ß–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏ undo |
| `canRedo` | `Boolean` | –ß–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏ redo |
| `historyIndex` | `Number` | –ü–æ—Ç–æ—á–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –≤ —ñ—Å—Ç–æ—Ä—ñ—ó |
| `historyLength` | `Number` | –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–∞–Ω—ñ–≤ |
| `goToHistoryState` | `Function` | –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ç–∞–Ω—É |
| `clearHistory` | `Function` | –û—á–∏—â–µ–Ω–Ω—è –≤—Å—ñ—î—ó —ñ—Å—Ç–æ—Ä—ñ—ó |
| `saveCurrentState` | `Function` | –†—É—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω—É |
| `exportHistory` | `Function` | –ï–∫—Å–ø–æ—Ä—Ç —ñ—Å—Ç–æ—Ä—ñ—ó |
| `importHistory` | `Function` | –Ü–º–ø–æ—Ä—Ç —ñ—Å—Ç–æ—Ä—ñ—ó |
| `history` | `Array` | –ü–æ–≤–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è (–¥–ª—è –¥–µ–±–∞–≥—É) |

### –§—É–Ω–∫—Ü—ñ—ó

#### `goToHistoryState(index)`
–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ç–∞–Ω—É –≤ —ñ—Å—Ç–æ—Ä—ñ—ó.

```jsx
goToHistoryState(5); // –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ 6-–≥–æ —Å—Ç–∞–Ω—É
```

#### `clearHistory()`
–û—á–∏—â–∞—î –≤—Å—é —ñ—Å—Ç–æ—Ä—ñ—é.

```jsx
clearHistory(); // –í–∏–¥–∞–ª—è—î –≤—Å—ñ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ —Å—Ç–∞–Ω–∏
```

#### `saveCurrentState()`
–†—É—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω—É –∫–∞–Ω–≤–∞—Å—É.

```jsx
saveCurrentState(); // –ó–±–µ—Ä—ñ–≥–∞—î –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –Ω–µ–≥–∞–π–Ω–æ
```

#### `exportHistory()`
–ï–∫—Å–ø–æ—Ä—Ç—É—î —ñ—Å—Ç–æ—Ä—ñ—é —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON.

```jsx
const historyData = exportHistory();
// { history: [...], currentIndex: 5, timestamp: 1234567890 }
```

#### `importHistory(historyData)`
–Ü–º–ø–æ—Ä—Ç—É—î —ñ—Å—Ç–æ—Ä—ñ—é –∑ JSON –¥–∞–Ω–∏—Ö.

```jsx
importHistory(historyData); // –í—ñ–¥–Ω–æ–≤–ª—é—î —ñ—Å—Ç–æ—Ä—ñ—é
```

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≤ —Ö—É–∫—É

```jsx
// –£ —Ñ–∞–π–ª—ñ useUndoRedo.js
const MAX_HISTORY_SIZE = 100; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–∞–Ω—ñ–≤
const SAVE_DELAY = 200; // –ó–∞—Ç—Ä–∏–º–∫–∞ –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º (–º—Å)
```

### –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω—ñ —Å–∫–æ—Ä–æ—á–µ–Ω–Ω—è

–ö–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω—ñ —Å–∫–æ—Ä–æ—á–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏:

- **Windows/Linux**: `Ctrl+Z`, `Ctrl+Y`
- **Mac**: `Cmd+Z`, `Cmd+Shift+Z`

## –ü–æ–¥—ñ—ó –∫–∞–Ω–≤–∞—Å—É

–•—É–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥—Å—Ç–µ–∂—É—î –Ω–∞—Å—Ç—É–ø–Ω—ñ –ø–æ–¥—ñ—ó:

### –ù–µ–≥–∞–π–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
- `object:added` - –î–æ–¥–∞–Ω–æ –æ–±'—î–∫—Ç
- `object:removed` - –í–∏–¥–∞–ª–µ–Ω–æ –æ–±'—î–∫—Ç  
- `path:created` - –°—Ç–≤–æ—Ä–µ–Ω–æ —à–ª—è—Ö (–º–∞–ª—é–≤–∞–Ω–Ω—è)

### –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑ –∑–∞—Ç—Ä–∏–º–∫–æ—é
- `object:modified` - –ó–º—ñ–Ω–µ–Ω–æ –æ–±'—î–∫—Ç
- `object:moving` - –ü–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞
- `object:scaling` - –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç–∞
- `object:rotating` - –û–±–µ—Ä—Ç–∞–Ω–Ω—è –æ–±'—î–∫—Ç–∞
- `text:changed` - –ó–º—ñ–Ω–∞ —Ç–µ–∫—Å—Ç—É
- `selection:created/updated/cleared` - –ó–º—ñ–Ω–∞ –≤–∏–¥—ñ–ª–µ–Ω–Ω—è

## –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

### –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É
- –í–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π
- –û–∫—Ä—É–≥–ª–µ–Ω–Ω—è —á–∏—Å–ª–æ–≤–∏—Ö –∑–Ω–∞—á–µ–Ω—å
- –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Å—Ç–∞–Ω—ñ–≤ –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤

### –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- –î–µ–±–∞—É–Ω—Å –¥–ª—è —á–∞—Å—Ç–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
- –û–±–º–µ–∂–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É —ñ—Å—Ç–æ—Ä—ñ—ó
- –ö–µ—à—É–≤–∞–Ω–Ω—è –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ —Å—Ç–∞–Ω—É

## –î–µ–±–∞–≥—É–≤–∞–Ω–Ω—è

### –ö–æ–Ω—Å–æ–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
–•—É–∫ –≤–∏–≤–æ–¥–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –≤ –∫–æ–Ω—Å–æ–ª—å:

```
History updated: 15 states, current index: 14
Undo: moving from index 14 to 13
Undo completed: restored state at index 13
```

### –î–æ—Å—Ç—É–ø –¥–æ —ñ—Å—Ç–æ—Ä—ñ—ó
```jsx
const { history } = useUndoRedo();
console.log('Full history:', history);
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç HistoryPanel

### –ü—Ä–æ–ø—Å–∏

| –ü—Ä–æ–ø | –¢–∏–ø | –û–ø–∏—Å |
|------|-----|------|
| `isOpen` | `Boolean` | –ß–∏ –≤—ñ–¥–∫—Ä–∏—Ç–∞ –ø–∞–Ω–µ–ª—å |
| `onClose` | `Function` | Callback –¥–ª—è –∑–∞–∫—Ä–∏—Ç—Ç—è –ø–∞–Ω–µ–ª—ñ |

### –§—É–Ω–∫—Ü—ñ—ó –ø–∞–Ω–µ–ª—ñ

- **–ü–æ—à—É–∫** - –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Å—Ç–∞–Ω—ñ–≤ –∑–∞ –æ–ø–∏—Å–æ–º
- **–û—á–∏—â–µ–Ω–Ω—è** - –í–∏–¥–∞–ª–µ–Ω–Ω—è –≤—Å—ñ—î—ó —ñ—Å—Ç–æ—Ä—ñ—ó
- **–ï–∫—Å–ø–æ—Ä—Ç** - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó —É —Ñ–∞–π–ª
- **–Ü–º–ø–æ—Ä—Ç** - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó –∑ —Ñ–∞–π–ª—É
- **–ú–µ—Ç—Ä–∏–∫–∏** - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ TopToolbar

```jsx
const TopToolbar = () => {
  const { undo, redo, canUndo, canRedo, historyLength } = useUndoRedo();
  
  return (
    <div>
      <button onClick={undo} disabled={!canUndo}>
        Undo
      </button>
      <button onClick={redo} disabled={!canRedo}>
        Redo
      </button>
      <span>States: {historyLength}</span>
    </div>
  );
};
```

### –ê–≤—Ç–æ–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É

```jsx
const AutoSave = () => {
  const { saveCurrentState } = useUndoRedo();
  
  useEffect(() => {
    const interval = setInterval(() => {
      saveCurrentState(); // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥
    }, 30000);
    
    return () => clearInterval(interval);
  }, [saveCurrentState]);
  
  return null;
};
```

## –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏

### –ï–∫—Å–ø–æ—Ä—Ç/–Ü–º–ø–æ—Ä—Ç
- **JSON** - –ü–æ–≤–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON
- **–ú–µ—Ç–∞–¥–∞–Ω—ñ** - –ß–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, —ñ–Ω–¥–µ–∫—Å, —Ä–æ–∑–º—ñ—Ä –∫–∞–Ω–≤–∞—Å—É

### –ó–±–µ—Ä–µ–∂–µ–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ
–í—Å—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –æ–±'—î–∫—Ç—ñ–≤ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è:
- `shapeType`, `isCutElement`, `cutType`
- `customProperties`, `id`, `name`
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ Fabric.js

## –û–±–º–µ–∂–µ–Ω–Ω—è

- –ú–∞–∫—Å–∏–º—É–º 100 —Å—Ç–∞–Ω—ñ–≤ –≤ —ñ—Å—Ç–æ—Ä—ñ—ó
- –í–µ–ª–∏–∫—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–æ–∂—É—Ç—å —Å–ø–æ–≤—ñ–ª—å–Ω–∏—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
- –î–µ—è–∫—ñ —Å–∫–ª–∞–¥–Ω—ñ –æ–±'—î–∫—Ç–∏ –º–æ–∂—É—Ç—å –Ω–µ –≤—ñ–¥–Ω–æ–≤–ª—é–≤–∞—Ç–∏—Å—è –ø–æ–≤–Ω—ñ—Å—Ç—é

## –ü–æ—Ä–∞–¥–∏ –∑ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

1. **–£–Ω–∏–∫–∞–π—Ç–µ —á–∞—Å—Ç–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π** - –í–µ–ª–∏–∫—ñ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —à–≤–∏–¥–∫–∏—Ö –∑–º—ñ–Ω –º–æ–∂—É—Ç—å —Å–ø–æ–≤—ñ–ª—å–Ω–∏—Ç–∏ —Ä–æ–±–æ—Ç—É
2. **–û—á–∏—â–∞–π—Ç–µ —ñ—Å—Ç–æ—Ä—ñ—é** - –ü–µ—Ä—ñ–æ–¥–∏—á–Ω–æ –æ—á–∏—â–∞–π—Ç–µ —ñ—Å—Ç–æ—Ä—ñ—é –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó –ø–∞–º'—è—Ç—ñ
3. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–µ–±–∞—É–Ω—Å** - –•—É–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –¥–µ–±–∞—É–Ω—Å –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
4. **–ú–æ–Ω—ñ—Ç–æ—Ä—Ç–µ —Ä–æ–∑–º—ñ—Ä —ñ—Å—Ç–æ—Ä—ñ—ó** - –°—Ç–µ–∂—Ç–µ –∑–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—é —Å—Ç–∞–Ω—ñ–≤ —á–µ—Ä–µ–∑ `historyLength`

## –†–æ–∑—Ä–æ–±–∫–∞

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –ø–æ–¥—ñ–π

```jsx
// –£ useUndoRedo.js
const eventsToSave = [
  'object:added',
  'object:removed',
  'your:custom:event' // –î–æ–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–æ–¥—ñ—é
];
```

### –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö

```jsx
const stateWithMetadata = {
  ...currentState,
  timestamp: Date.now(),
  customData: {
    // –í–∞—à—ñ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ
  }
};
```
